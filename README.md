# Проект YAMDB

[![Actions Status](https://github.com/monticola/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg)](https://github.com/monticola/yamdb_final/actions)

### Ссылки на проект

API link: http://158.160.44.102/api/v1

ReDoc link: http://158.160.44.102/redoc/

Admin's link: http://158.160.44.102/admin/

### Описание проекта

Проект YAMDB собирает отзывы пользователей на произведения. Произведения делятся на категории, например, «Книги», «Фильмы», «Музыка». Список категорий может быть меняться администратором.
Сами произведения в Infra не хранятся, здесь нельзя посмотреть фильм или послушать музыку.
В каждой категории есть произведения. Например, в категории «Книги» могут быть произведения «Винни-Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» — песня «Давеча» группы «Насекомые» и вторая сюита Баха.
Произведению может быть присвоен жанр из списка предустановленных. Новые жанры может создавать только администратор.
Пользователи могут оставлять к произведениям текстовые отзывы и ставить произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения — рейтинг (целое число). На одно произведение пользователь может оставить только один отзыв.


### Как запустить проект:

Клонировать репозиторий и перейти в него в командной строке:

```
git clone https://github.com/monticola/infra_sp2.git
```

```
Развернуть Докер-контейнеры:
```
docker-compose up
```

Выполнить миграции и собрать статику проекта:
```
docker-compose exec web python manage.py migrate
docker-compose exec web python manage.py createsuperuser
docker-compose exec web python manage.py collectstatic --no-input
```

### Пользовательские роли

1. Пользователь: может просматривать списки категорий, жанров, а также изучать информацию о произведениях. Также может писать отзывы на произведения и комментарии к отзывам. Может редактировать и/или удалять собственные отзывы и комментарии.
2. Модератор: обладает теми же правами, что и пользователь, но дополнительно имеет права на изменение и/или удаление отзывов и комментариев любых других пользователей.
3. Администратор: в дополнение к правам модератора может добавлять/удалять категории и жанры, добавлять/удалять произведения, регистрировать и удалять новых пользователей, менять роли пользователям.


### Ресурсы

1. Ресурс auth (auth/): аутентификация.
2. Ресурс users (users/): пользователи.
3. Ресурс categories (categories/): категории (типы) произведений («Фильмы», «Книги», «Музыка»).
4. Ресурс genres (genres/): жанры произведений. Одно произведение может быть привязано к нескольким жанрам.
5. Ресурс titles (titles/): произведения, к которым пишут отзывы (определённый фильм, книга или песенка).
6. Ресурс reviews (titles/[id]/reviews/): отзывы на произведения. Отзыв привязан к определённому произведению.
7. Ресурс comments (titles/[id]/reviews/[id]/comments/): комментарии к отзывам. Комментарий привязан к определённому отзыву.


### Регистрация и авторизация

1. Пользователь отправляет POST-запрос с параметрами "email" и "username" на эндпоинт /api/v1/auth/signup/.
2. Сервис YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на указанный адрес email.
3. Пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт /api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен).


### Используемые технологии

* PYTHON
* DJANGO
* DJANGO REST FRAMEWORK
* JWY


### Документация к API

Для ознакомления с документацией к API перейдите по ссылке:

```http://localhost/redoc/```

## Примеры использования API:

Для получения объекта используется:
```GET /api/v1/{объект}```

Для добавления нового объекта используется:
```POST /api/v1/{объект}```

## Структура json запроса:

{"name": "название",
 "year": "целое число",
 "description": "описание",
 "genre": ["жанр"],
 "category": "категория"}


### Шаблон .env файла

# База данных
DB_ENGINE=django.db.backends.postgresql
# Название БД
DB_NAME=
# Логин пользователя БД
POSTGRES_USER=
# Пароль пользователя БД
POSTGRES_PASSWORD=
# Название хоста
DB_HOST=
# Порт
DB_PORT=


### Автор:

[Monticola]
Git - https://github.com/monticola
Email - ```jandiev2001@yandex.ru```
